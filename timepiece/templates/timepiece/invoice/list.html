{% extends 'timepiece/invoice/base.html' %}
{% load timepiece_tags bootstrap_toolkit %}
{% load url from future %}
{% load i18n %}

{% block title %}{% trans "Invoices" %}{% endblock title %}

{% block content %}
    <div class="row-fluid">
        <div class="span12">
            <h2>{% trans "All Invoices" %}</h2>
            <ul class="nav nav-pills">
                <li>
                    <a href="{% url 'list_outstanding_invoices' %}">{% trans "Outstanding Hours" %}</a>
                </li>
                <li>
                    <span>{% trans "Previous Invoices" %}</span>
                </li>
            </ul>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12">
            <form class="form-inline" accept-charset="UTF-8" method="get" action="">
                {{ form|as_bootstrap:"inline" }}
                <button type="submit" class="btn">{% trans "Search" %}</button>
            </form>
        </div>
    </div>

    {% load pagination_tags %}

    <div class="row-fluid">
        <div class="span12">
            {% if object_list %}
                {% autopaginate object_list %}
                {% paginate %}
                <table class="table table-bordered table-striped table-condensed">
                    <thead>
                        <tr>
                            <th>{% trans "Invoice" %}</th>
                            <th>{% trans "Reference" %}</th>
                            <th>{% trans "Project" %}</th>
                            <th>{% trans "Status" %}</th>
                            <th>{% trans "Invoiced by" %}</th>
                            <th>{% trans "Created on" %}</th>
                            <th>{% trans "Starting on" %}</th>
                            <th>{% trans "Ending on" %}</th>
                            <th>{% trans "Comments" %}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for invoice in object_list %}
                            <tr>
                                <td><a href="{% url 'view_invoice' invoice.pk %}">{{ invoice.pk }}</a></td>
                                <td>{{ invoice.number|default:'' }}</td>
                                <td>{{ invoice.project }}</td>
                                <td>{{ invoice.status|capfirst }}</td>
                                <td>{{ invoice.user.get_name_or_username }}</td>
                                <td>{{ invoice.created|date:'M j, Y P' }}</td>
                                <td>{{ invoice.start|date:'M j, Y'}}</td>
                                <td>{{ invoice.end|date:'M j, Y'}}</td>
                                <td title="{{ invoice.comments }} ">{{ invoice.comments|truncatewords:12 }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                {% paginate %}
            {% else %}
                <p>{% trans "There are no invoices." %}</p>
            {% endif %}
        </div>
    </div>
{% endblock content %}
